
   FastAPI   Starting development server üöÄ

             Searching for package file structure from directories with
             __init__.py files
             Importing from
             /Users/manonjacquin/Documents_local/POCs/quickExpense/src

    module   üìÅ quickexpense
             ‚îú‚îÄ‚îÄ üêç __init__.py
             ‚îî‚îÄ‚îÄ üêç main.py

      code   Importing the FastAPI app object from the module with the following
             code:

             from quickexpense.main import app

       app   Using import string: quickexpense.main:app

    server   Server started at http://127.0.0.1:8000
    server   Documentation at http://127.0.0.1:8000/docs

       tip   Running in development mode, for production use: fastapi run

             Logs:

      INFO   Will watch for changes in these directories:
             ['/Users/manonjacquin/Documents_local/POCs/quickExpense']
2025-09-05 12:33:42,769 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/manonjacquin/Documents_local/POCs/quickExpense']
      INFO   Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-09-05 12:33:42,769 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
      INFO   Started reloader process [32155] using WatchFiles
2025-09-05 12:33:42,770 - uvicorn.error - INFO - Started reloader process [32155] using WatchFiles
      INFO   Started server process [32202]
2025-09-05 12:33:43,902 - uvicorn.error - INFO - Started server process [32202]
      INFO   Waiting for application startup.
2025-09-05 12:33:43,903 - uvicorn.error - INFO - Waiting for application startup.
2025-09-05 12:33:43,904 - quickexpense.main - INFO - Starting QuickExpense application...
2025-09-05 12:33:43,936 - quickexpense.main - INFO - QuickBooks client initialized with OAuth manager
2025-09-05 12:33:43,936 - quickexpense.main - INFO - Background token refresh task started
2025-09-05 12:33:44,104 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:33:44,105 - quickexpense.services.quickbooks - INFO - Got 401, attempting token refresh and retry
2025-09-05 12:33:44,150 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:33:44,151 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100824240,"status":null,"cdcresponse":[]}
2025-09-05 12:33:44,151 - quickexpense.services.quickbooks - ERROR - Token refresh failed on 401 retry
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 144, in _request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 156, in _request
    raise QuickBooksError(f"API request failed: {e}") from e
quickexpense.services.quickbooks.QuickBooksError: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-09-05 12:33:44,154 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100824197,"status":null,"cdcresponse":[]}
2025-09-05 12:33:44,154 - quickexpense.main - WARNING - QuickBooks connection failed on startup: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
      INFO   Application startup complete.
2025-09-05 12:33:44,155 - uvicorn.error - INFO - Application startup complete.
      INFO   127.0.0.1:52290 - "GET /health HTTP/1.1" 200
2025-09-05 12:35:08,132 - watchfiles.main - INFO - 3 changes detected
   WARNING   WatchFiles detected changes in 'scripts/test_quickbooks_direct.py'.
             Reloading...
2025-09-05 12:35:08,133 - uvicorn.error - WARNING - WatchFiles detected changes in 'scripts/test_quickbooks_direct.py'. Reloading...
      INFO   Shutting down
2025-09-05 12:35:08,231 - uvicorn.error - INFO - Shutting down
      INFO   Waiting for application shutdown.
2025-09-05 12:35:08,333 - uvicorn.error - INFO - Waiting for application shutdown.
2025-09-05 12:35:08,333 - quickexpense.main - INFO - Shutting down QuickExpense application...
2025-09-05 12:35:08,334 - quickexpense.main - INFO - Background token refresh task cancelled
      INFO   Application shutdown complete.
2025-09-05 12:35:08,334 - uvicorn.error - INFO - Application shutdown complete.
      INFO   Finished server process [32202]
2025-09-05 12:35:08,335 - uvicorn.error - INFO - Finished server process [32202]
      INFO   Started server process [34426]
2025-09-05 12:35:09,446 - uvicorn.error - INFO - Started server process [34426]
      INFO   Waiting for application startup.
2025-09-05 12:35:09,447 - uvicorn.error - INFO - Waiting for application startup.
2025-09-05 12:35:09,448 - quickexpense.main - INFO - Starting QuickExpense application...
2025-09-05 12:35:09,479 - quickexpense.main - INFO - QuickBooks client initialized with OAuth manager
2025-09-05 12:35:09,479 - quickexpense.main - INFO - Background token refresh task started
2025-09-05 12:35:09,651 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:35:09,651 - quickexpense.services.quickbooks - INFO - Got 401, attempting token refresh and retry
2025-09-05 12:35:09,693 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:35:09,694 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100909784,"status":null,"cdcresponse":[]}
2025-09-05 12:35:09,694 - quickexpense.services.quickbooks - ERROR - Token refresh failed on 401 retry
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 144, in _request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 156, in _request
    raise QuickBooksError(f"API request failed: {e}") from e
quickexpense.services.quickbooks.QuickBooksError: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-09-05 12:35:09,695 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100909741,"status":null,"cdcresponse":[]}
2025-09-05 12:35:09,695 - quickexpense.main - WARNING - QuickBooks connection failed on startup: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
      INFO   Application startup complete.
2025-09-05 12:35:09,696 - uvicorn.error - INFO - Application startup complete.
2025-09-05 12:35:23,839 - watchfiles.main - INFO - 1 change detected
   WARNING   WatchFiles detected changes in 'scripts/test_quickbooks_direct.py'.
             Reloading...
2025-09-05 12:35:23,840 - uvicorn.error - WARNING - WatchFiles detected changes in 'scripts/test_quickbooks_direct.py'. Reloading...
      INFO   Shutting down
2025-09-05 12:35:23,932 - uvicorn.error - INFO - Shutting down
      INFO   Waiting for application shutdown.
2025-09-05 12:35:24,033 - uvicorn.error - INFO - Waiting for application shutdown.
2025-09-05 12:35:24,034 - quickexpense.main - INFO - Shutting down QuickExpense application...
2025-09-05 12:35:24,034 - quickexpense.main - INFO - Background token refresh task cancelled
      INFO   Application shutdown complete.
2025-09-05 12:35:24,034 - uvicorn.error - INFO - Application shutdown complete.
      INFO   Finished server process [34426]
2025-09-05 12:35:24,035 - uvicorn.error - INFO - Finished server process [34426]
      INFO   Started server process [34809]
2025-09-05 12:35:25,188 - uvicorn.error - INFO - Started server process [34809]
      INFO   Waiting for application startup.
2025-09-05 12:35:25,189 - uvicorn.error - INFO - Waiting for application startup.
2025-09-05 12:35:25,190 - quickexpense.main - INFO - Starting QuickExpense application...
2025-09-05 12:35:25,223 - quickexpense.main - INFO - QuickBooks client initialized with OAuth manager
2025-09-05 12:35:25,223 - quickexpense.main - INFO - Background token refresh task started
2025-09-05 12:35:25,388 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:35:25,388 - quickexpense.services.quickbooks - INFO - Got 401, attempting token refresh and retry
2025-09-05 12:35:25,432 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:35:25,432 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100925523,"status":null,"cdcresponse":[]}
2025-09-05 12:35:25,432 - quickexpense.services.quickbooks - ERROR - Token refresh failed on 401 retry
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 144, in _request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 156, in _request
    raise QuickBooksError(f"API request failed: {e}") from e
quickexpense.services.quickbooks.QuickBooksError: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-09-05 12:35:25,434 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100925478,"status":null,"cdcresponse":[]}
2025-09-05 12:35:25,434 - quickexpense.main - WARNING - QuickBooks connection failed on startup: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
      INFO   Application startup complete.
2025-09-05 12:35:25,434 - uvicorn.error - INFO - Application startup complete.
2025-09-05 12:35:48,446 - watchfiles.main - INFO - 3 changes detected
   WARNING   WatchFiles detected changes in 'scripts/update_tokens.py'.
             Reloading...
2025-09-05 12:35:48,447 - uvicorn.error - WARNING - WatchFiles detected changes in 'scripts/update_tokens.py'. Reloading...
      INFO   Shutting down
2025-09-05 12:35:48,532 - uvicorn.error - INFO - Shutting down
      INFO   Waiting for application shutdown.
2025-09-05 12:35:48,632 - uvicorn.error - INFO - Waiting for application shutdown.
2025-09-05 12:35:48,633 - quickexpense.main - INFO - Shutting down QuickExpense application...
2025-09-05 12:35:48,633 - quickexpense.main - INFO - Background token refresh task cancelled
      INFO   Application shutdown complete.
2025-09-05 12:35:48,633 - uvicorn.error - INFO - Application shutdown complete.
      INFO   Finished server process [34809]
2025-09-05 12:35:48,634 - uvicorn.error - INFO - Finished server process [34809]
      INFO   Started server process [35438]
2025-09-05 12:35:49,739 - uvicorn.error - INFO - Started server process [35438]
      INFO   Waiting for application startup.
2025-09-05 12:35:49,740 - uvicorn.error - INFO - Waiting for application startup.
2025-09-05 12:35:49,741 - quickexpense.main - INFO - Starting QuickExpense application...
2025-09-05 12:35:49,771 - quickexpense.main - INFO - QuickBooks client initialized with OAuth manager
2025-09-05 12:35:49,771 - quickexpense.main - INFO - Background token refresh task started
2025-09-05 12:35:49,932 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:35:49,933 - quickexpense.services.quickbooks - INFO - Got 401, attempting token refresh and retry
2025-09-05 12:35:49,978 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:35:49,979 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100950067,"status":null,"cdcresponse":[]}
2025-09-05 12:35:49,979 - quickexpense.services.quickbooks - ERROR - Token refresh failed on 401 retry
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 144, in _request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 156, in _request
    raise QuickBooksError(f"API request failed: {e}") from e
quickexpense.services.quickbooks.QuickBooksError: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-09-05 12:35:49,980 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757100950022,"status":null,"cdcresponse":[]}
2025-09-05 12:35:49,980 - quickexpense.main - WARNING - QuickBooks connection failed on startup: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
      INFO   Application startup complete.
2025-09-05 12:35:49,980 - uvicorn.error - INFO - Application startup complete.
2025-09-05 12:37:35,460 - watchfiles.main - INFO - 2 changes detected
      INFO   127.0.0.1:52721 - "GET /api/v1/test-connection HTTP/1.1" 422
      INFO   127.0.0.1:52796 - "GET /openapi.json HTTP/1.1" 500
     ERROR   Exception in ASGI application
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1009, in openapi
    return JSONResponse(self.openapi())
                        ^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 981, in openapi
    self.openapi_schema = get_openapi(
                          ^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/openapi/utils.py", line 514, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/_compat.py", line 232, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 363, in generate_definitions
    self.generate_inner(schema)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 443, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 813, in __contains__
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]]` is not fully defined; you should define `typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.11/u/class-not-fully-defined
2025-09-05 12:38:31,231 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1009, in openapi
    return JSONResponse(self.openapi())
                        ^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 981, in openapi
    self.openapi_schema = get_openapi(
                          ^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/openapi/utils.py", line 514, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/_compat.py", line 232, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 363, in generate_definitions
    self.generate_inner(schema)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 443, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 813, in __contains__
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]]` is not fully defined; you should define `typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.11/u/class-not-fully-defined
      INFO   127.0.0.1:52819 - "GET /api/v1/test-connection HTTP/1.1" 422
      INFO   127.0.0.1:52827 - "GET /health HTTP/1.1" 200
      INFO   127.0.0.1:52844 - "GET /openapi.json HTTP/1.1" 500
     ERROR   Exception in ASGI application
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1009, in openapi
    return JSONResponse(self.openapi())
                        ^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 981, in openapi
    self.openapi_schema = get_openapi(
                          ^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/openapi/utils.py", line 514, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/_compat.py", line 232, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 363, in generate_definitions
    self.generate_inner(schema)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 443, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 813, in __contains__
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]]` is not fully defined; you should define `typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.11/u/class-not-fully-defined
2025-09-05 12:38:58,068 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/starlette/routing.py", line 75, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1009, in openapi
    return JSONResponse(self.openapi())
                        ^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 981, in openapi
    self.openapi_schema = get_openapi(
                          ^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/openapi/utils.py", line 514, in get_openapi
    field_mapping, definitions = get_definitions(
                                 ^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/fastapi/_compat.py", line 232, in get_definitions
    field_mapping, definitions = schema_generator.generate_definitions(
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 363, in generate_definitions
    self.generate_inner(schema)
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/json_schema.py", line 443, in generate_inner
    if 'ref' in schema:
       ^^^^^^^^^^^^^^^
  File "<frozen _collections_abc>", line 813, in __contains__
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 41, in __getitem__
    return self._get_built().__getitem__(key)
           ^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/pydantic/_internal/_mock_val_ser.py", line 58, in _get_built
    raise PydanticUserError(self._error_message, code=self._code)
pydantic.errors.PydanticUserError: `TypeAdapter[typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]]` is not fully defined; you should define `typing.Annotated[ForwardRef('list[VendorSearchResult]'), FieldInfo(annotation=ForwardRef('list[VendorSearchResult]'), required=True)]` and all referenced types, then call `.rebuild()` on the instance.

For further information visit https://errors.pydantic.dev/2.11/u/class-not-fully-defined
2025-09-05 12:40:57,378 - watchfiles.main - INFO - 1 change detected
2025-09-05 12:40:57,735 - watchfiles.main - INFO - 3 changes detected
2025-09-05 12:40:58,566 - watchfiles.main - INFO - 3 changes detected
2025-09-05 12:42:14,218 - watchfiles.main - INFO - 3 changes detected
   WARNING   WatchFiles detected changes in 'src/quickexpense/api/routes.py'.
             Reloading...
2025-09-05 12:42:14,219 - uvicorn.error - WARNING - WatchFiles detected changes in 'src/quickexpense/api/routes.py'. Reloading...
      INFO   Shutting down
2025-09-05 12:42:14,255 - uvicorn.error - INFO - Shutting down
      INFO   Waiting for application shutdown.
2025-09-05 12:42:14,356 - uvicorn.error - INFO - Waiting for application shutdown.
2025-09-05 12:42:14,357 - quickexpense.main - INFO - Shutting down QuickExpense application...
2025-09-05 12:42:14,357 - quickexpense.main - INFO - Background token refresh task cancelled
      INFO   Application shutdown complete.
2025-09-05 12:42:14,358 - uvicorn.error - INFO - Application shutdown complete.
      INFO   Finished server process [35438]
2025-09-05 12:42:14,359 - uvicorn.error - INFO - Finished server process [35438]
2025-09-05 12:42:15,465 - watchfiles.main - INFO - 3 changes detected
      INFO   Started server process [45041]
2025-09-05 12:42:15,895 - uvicorn.error - INFO - Started server process [45041]
      INFO   Waiting for application startup.
2025-09-05 12:42:15,896 - uvicorn.error - INFO - Waiting for application startup.
2025-09-05 12:42:15,897 - quickexpense.main - INFO - Starting QuickExpense application...
2025-09-05 12:42:15,930 - quickexpense.main - INFO - QuickBooks client initialized with OAuth manager
2025-09-05 12:42:15,930 - quickexpense.main - INFO - Background token refresh task started
2025-09-05 12:42:16,087 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:42:16,088 - quickexpense.services.quickbooks - INFO - Got 401, attempting token refresh and retry
2025-09-05 12:42:16,131 - httpx - INFO - HTTP Request: GET https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400 "HTTP/1.1 401 Unauthorized"
2025-09-05 12:42:16,132 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757101336217,"status":null,"cdcresponse":[]}
2025-09-05 12:42:16,132 - quickexpense.services.quickbooks - ERROR - Token refresh failed on 401 retry
Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 133, in _request
    response.raise_for_status()
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 144, in _request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^
  File "/Users/manonjacquin/Documents_local/POCs/quickExpense/src/quickexpense/services/quickbooks.py", line 156, in _request
    raise QuickBooksError(f"API request failed: {e}") from e
quickexpense.services.quickbooks.QuickBooksError: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-09-05 12:42:16,133 - quickexpense.services.quickbooks - ERROR - QuickBooks API error: {"warnings":null,"intuitObject":null,"fault":{"error":[{"message":"message=AuthenticationFailed; errorCode=003200; statusCode=401","detail":"Token expired","code":"3200","element":null}],"type":"AUTHENTICATION"},"report":null,"queryResponse":null,"batchItemResponse":[],"attachableResponse":[],"syncErrorResponse":null,"requestId":null,"time":1757101336170,"status":null,"cdcresponse":[]}
2025-09-05 12:42:16,133 - quickexpense.main - WARNING - QuickBooks connection failed on startup: API request failed: Client error '401 Unauthorized' for url 'https://sandbox-quickbooks.api.intuit.com/v3/company/9341455239672400/companyinfo/9341455239672400'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
      INFO   Application startup complete.
2025-09-05 12:42:16,133 - uvicorn.error - INFO - Application startup complete.
2025-09-05 12:44:12,360 - watchfiles.main - INFO - 1 change detected
2025-09-05 12:44:13,412 - watchfiles.main - INFO - 1 change detected
2025-09-05 12:44:13,772 - watchfiles.main - INFO - 2 changes detected
2025-09-05 12:45:31,132 - watchfiles.main - INFO - 86 changes detected
